"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4607],{4607:(P,d,l)=>{l.r(d),l.d(d,{CreateRoutePageModule:()=>R});var g=l(177),n=l(4341),i=l(4742),m=l(8986),h=l(467),e=l(3953);const f=["originInput"],C=["destinationInput"],M=[{path:"",component:(()=>{var o;class u{constructor(t){this.fb=t,this.routeForm=this.fb.group({startTime:["",n.k0.required],startDate:["",n.k0.required],availableSeats:["",[n.k0.required,n.k0.min(1)]],startLocation:["",n.k0.required],endLocation:["",n.k0.required]}),this.directionsService=new google.maps.DirectionsService,this.directionsRenderer=new google.maps.DirectionsRenderer,this.directionsRenderer.setMap(this.map)}ngAfterViewInit(){this.initMap(),this.initAutocomplete(),this.directionsRenderer.setMap(this.map)}initMap(){this.map=new google.maps.Map(document.getElementById("map"),{center:{lat:14.634915,lng:-90.506882},zoom:12})}initAutocomplete(){var t=this;return(0,h.A)(function*(){const s=yield t.originInput.getInputElement();t.setupAutocomplete(s,"origin");const r=yield t.destinationInput.getInputElement();t.setupAutocomplete(r,"destination")})()}setupAutocomplete(t,s){const r=new google.maps.places.Autocomplete(t,{componentRestrictions:{country:"GT"}});r.addListener("place_changed",()=>{const a=r.getPlace();!a.geometry||!a.geometry.location||(this.map.setCenter(a.geometry.location),this.map.setZoom(15),"origin"===s?(this.originMarker?this.originMarker.setPosition(a.geometry.location):this.originMarker=new google.maps.Marker({position:a.geometry.location,map:this.map,title:"Punto de Origen"}),this.routeForm.patchValue({startLocation:a.formatted_address}),this.calculateAndDisplayRoute()):"destination"===s&&(this.destinationMarker?this.destinationMarker.setPosition(a.geometry.location):this.destinationMarker=new google.maps.Marker({position:a.geometry.location,map:this.map,title:"Punto de Destino"}),this.routeForm.patchValue({endLocation:a.formatted_address}),this.calculateAndDisplayRoute()))})}calculateAndDisplayRoute(){if(console.log(" origin marker"),console.log(this.originMarker),console.log(" destination marker"),console.log(this.destinationMarker),this.originMarker&&this.destinationMarker){console.log(" CREANDO RUTA CON AMBOS PUNTOS");const r={origin:this.originMarker.getPosition(),destination:this.destinationMarker.getPosition(),travelMode:google.maps.TravelMode.DRIVING};this.directionsService.route(r,(a,p)=>{p===google.maps.DirectionsStatus.OK?(console.log("Ruta trazada:",a),this.directionsRenderer.setDirections(a)):console.error("Error al trazar la ruta:",p)})}}onCreateRoute(){this.routeForm.valid?console.log("Formulario v\xe1lido",this.routeForm.value):console.log("Formulario inv\xe1lido")}}return(o=u).\u0275fac=function(t){return new(t||o)(e.rXU(n.ok))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-create-route"]],viewQuery:function(t,s){if(1&t&&(e.GBs(f,5),e.GBs(C,5)),2&t){let r;e.mGM(r=e.lsd())&&(s.originInput=r.first),e.mGM(r=e.lsd())&&(s.destinationInput=r.first)}},decls:34,vars:1,consts:[["originInput",""],["destinationInput",""],["slot","start"],[1,"ion-padding"],[3,"formGroup"],["position","floating"],["formControlName","startTime","type","time","placeholder","Ingresa la hora de salida"],["formControlName","startDate","displayFormat","DD/MM/YYYY","placeholder","Selecciona la fecha"],["formControlName","availableSeats","type","number","min","1","placeholder","\xbfCu\xe1ntos asientos tienes libres?"],["formControlName","startLocation","type","text","placeholder","Selecciona el punto de origen"],["formControlName","endLocation","type","text","placeholder","Selecciona el punto de destino"],["id","map",2,"height","400px","width","100%"],["expand","full","type","submit",3,"click"]],template:function(t,s){if(1&t){const r=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",2),e.nrm(3,"ion-back-button"),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Crear Rutas"),e.k0s()()(),e.j41(6,"ion-content",3)(7,"form",4)(8,"ion-item")(9,"ion-label",5),e.EFF(10,"Hora de Salida"),e.k0s(),e.nrm(11,"ion-input",6),e.k0s(),e.j41(12,"ion-item")(13,"ion-label",5),e.EFF(14,"Fecha"),e.k0s(),e.nrm(15,"ion-datetime",7),e.k0s(),e.j41(16,"ion-item")(17,"ion-label",5),e.EFF(18,"Asientos disponibles"),e.k0s(),e.nrm(19,"ion-input",8),e.k0s(),e.j41(20,"ion-item")(21,"ion-label",5),e.EFF(22,"Lugar de origen"),e.k0s(),e.nrm(23,"ion-input",9,0),e.k0s(),e.j41(25,"ion-item")(26,"ion-label",5),e.EFF(27,"Lugar de destino"),e.k0s(),e.nrm(28,"ion-input",10,1),e.k0s(),e.nrm(30,"div",11)(31,"br"),e.j41(32,"ion-button",12),e.bIt("click",function(){return e.eBV(r),e.Njj(s.onCreateRoute())}),e.EFF(33,"Crear Ruta"),e.k0s()()()}2&t&&(e.R7$(7),e.Y8G("formGroup",s.routeForm))},dependencies:[n.qT,n.BC,n.cb,i.Jm,i.QW,i.W9,i.A9,i.eU,i.$w,i.uz,i.he,i.BC,i.ai,i.su,i.Je,i.Gw,i.el,i.T6,n.j4,n.JD],styles:["ion-item[_ngcontent-%COMP%]{--background: $background-color;--border-radius: $border-radius;margin-bottom:16px}#map[_ngcontent-%COMP%]{height:300px;width:100%;margin-top:20px;border-radius:10px;position:relative;overflow:hidden}ion-button[_ngcontent-%COMP%]{margin-top:10px;--background: #87CEFA !important;--border-radius: 8px}ion-label[_ngcontent-%COMP%]{color:#004cd1}ion-input[_ngcontent-%COMP%], ion-datetime[_ngcontent-%COMP%]{--padding-start: $spacing / 2;font-size:16px}"]}),u})()}];let k=(()=>{var o;class u{}return(o=u).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[m.iI.forChild(M),m.iI]}),u})(),R=(()=>{var o;class u{}return(o=u).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[g.MD,n.YN,i.bv,k,n.YN,n.X1]}),u})()}}]);