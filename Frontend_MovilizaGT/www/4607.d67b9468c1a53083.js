"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4607],{4607:(C,u,l)=>{l.r(u),l.d(u,{CreateRoutePageModule:()=>M});var m=l(177),n=l(4341),i=l(4742),d=l(8986),p=l(467),t=l(3953);const g=["originInput"],h=["destinationInput"],f=[{path:"",component:(()=>{class a{constructor(r){this.fb=r,this.routeForm=this.fb.group({startTime:["",n.k0.required],startDate:["",n.k0.required],availableSeats:["",[n.k0.required,n.k0.min(1)]],startLocation:["",n.k0.required],endLocation:["",n.k0.required]}),this.directionsService=new google.maps.DirectionsService,this.directionsRenderer=new google.maps.DirectionsRenderer,this.directionsRenderer.setMap(this.map)}ngAfterViewInit(){this.initMap(),this.initAutocomplete(),this.directionsRenderer.setMap(this.map)}initMap(){this.map=new google.maps.Map(document.getElementById("map"),{center:{lat:14.634915,lng:-90.506882},zoom:12})}initAutocomplete(){var r=this;return(0,p.A)(function*(){const o=yield r.originInput.getInputElement();r.setupAutocomplete(o,"origin");const s=yield r.destinationInput.getInputElement();r.setupAutocomplete(s,"destination")})()}setupAutocomplete(r,o){const s=new google.maps.places.Autocomplete(r,{componentRestrictions:{country:"GT"}});s.addListener("place_changed",()=>{const e=s.getPlace();!e.geometry||!e.geometry.location||(this.map.setCenter(e.geometry.location),this.map.setZoom(15),"origin"===o?(this.originMarker?this.originMarker.setPosition(e.geometry.location):this.originMarker=new google.maps.Marker({position:e.geometry.location,map:this.map,title:"Punto de Origen"}),this.routeForm.patchValue({startLocation:e.formatted_address}),this.calculateAndDisplayRoute()):"destination"===o&&(this.destinationMarker?this.destinationMarker.setPosition(e.geometry.location):this.destinationMarker=new google.maps.Marker({position:e.geometry.location,map:this.map,title:"Punto de Destino"}),this.routeForm.patchValue({endLocation:e.formatted_address}),this.calculateAndDisplayRoute()))})}calculateAndDisplayRoute(){if(console.log(" origin marker"),console.log(this.originMarker),console.log(" destination marker"),console.log(this.destinationMarker),this.originMarker&&this.destinationMarker){console.log(" CREANDO RUTA CON AMBOS PUNTOS");const s={origin:this.originMarker.getPosition(),destination:this.destinationMarker.getPosition(),travelMode:google.maps.TravelMode.DRIVING};this.directionsService.route(s,(e,c)=>{c===google.maps.DirectionsStatus.OK?(console.log("Ruta trazada:",e),this.directionsRenderer.setDirections(e)):console.error("Error al trazar la ruta:",c)})}}onCreateRoute(){this.routeForm.valid?console.log("Formulario v\xe1lido",this.routeForm.value):console.log("Formulario inv\xe1lido")}static#t=this.\u0275fac=function(o){return new(o||a)(t.rXU(n.ok))};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["app-create-route"]],viewQuery:function(o,s){if(1&o&&(t.GBs(g,5),t.GBs(h,5)),2&o){let e;t.mGM(e=t.lsd())&&(s.originInput=e.first),t.mGM(e=t.lsd())&&(s.destinationInput=e.first)}},decls:34,vars:1,consts:[["originInput",""],["destinationInput",""],["slot","start"],[1,"ion-padding"],[3,"formGroup"],["position","floating"],["formControlName","startTime","type","time","placeholder","Ingresa la hora de salida"],["formControlName","startDate","displayFormat","DD/MM/YYYY","placeholder","Selecciona la fecha"],["formControlName","availableSeats","type","number","min","1","placeholder","\xbfCu\xe1ntos asientos tienes libres?"],["formControlName","startLocation","type","text","placeholder","Selecciona el punto de origen"],["formControlName","endLocation","type","text","placeholder","Selecciona el punto de destino"],["id","map",2,"height","400px","width","100%"],["expand","full","type","submit",3,"click"]],template:function(o,s){if(1&o){const e=t.RV6();t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",2),t.nrm(3,"ion-back-button"),t.k0s(),t.j41(4,"ion-title"),t.EFF(5,"Crear Rutas"),t.k0s()()(),t.j41(6,"ion-content",3)(7,"form",4)(8,"ion-item")(9,"ion-label",5),t.EFF(10,"Hora de Salida"),t.k0s(),t.nrm(11,"ion-input",6),t.k0s(),t.j41(12,"ion-item")(13,"ion-label",5),t.EFF(14,"Fecha"),t.k0s(),t.nrm(15,"ion-datetime",7),t.k0s(),t.j41(16,"ion-item")(17,"ion-label",5),t.EFF(18,"Asientos disponibles"),t.k0s(),t.nrm(19,"ion-input",8),t.k0s(),t.j41(20,"ion-item")(21,"ion-label",5),t.EFF(22,"Lugar de origen"),t.k0s(),t.nrm(23,"ion-input",9,0),t.k0s(),t.j41(25,"ion-item")(26,"ion-label",5),t.EFF(27,"Lugar de destino"),t.k0s(),t.nrm(28,"ion-input",10,1),t.k0s(),t.nrm(30,"div",11)(31,"br"),t.j41(32,"ion-button",12),t.bIt("click",function(){return t.eBV(e),t.Njj(s.onCreateRoute())}),t.EFF(33,"Crear Ruta"),t.k0s()()()}2&o&&(t.R7$(7),t.Y8G("formGroup",s.routeForm))},dependencies:[n.qT,n.BC,n.cb,i.Jm,i.QW,i.W9,i.A9,i.eU,i.$w,i.uz,i.he,i.BC,i.ai,i.su,i.Je,i.Gw,i.el,i.T6,n.j4,n.JD],styles:["ion-item[_ngcontent-%COMP%]{--background: $background-color;--border-radius: $border-radius;margin-bottom:16px}#map[_ngcontent-%COMP%]{height:300px;width:100%;margin-top:20px;border-radius:10px;position:relative;overflow:hidden}ion-button[_ngcontent-%COMP%]{margin-top:10px;--background: #87CEFA !important;--border-radius: 8px}ion-label[_ngcontent-%COMP%]{color:#004cd1}ion-input[_ngcontent-%COMP%], ion-datetime[_ngcontent-%COMP%]{--padding-start: $spacing / 2;font-size:16px}"]})}return a})()}];let k=(()=>{class a{static#t=this.\u0275fac=function(o){return new(o||a)};static#e=this.\u0275mod=t.$C({type:a});static#o=this.\u0275inj=t.G2t({imports:[d.iI.forChild(f),d.iI]})}return a})(),M=(()=>{class a{static#t=this.\u0275fac=function(o){return new(o||a)};static#e=this.\u0275mod=t.$C({type:a});static#o=this.\u0275inj=t.G2t({imports:[m.MD,n.YN,i.bv,k,n.YN,n.X1]})}return a})()}}]);